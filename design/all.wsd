@startuml

title All

note left
"*" indicates end-to-end encrypted fields
end note

map UserProfile {
  genesis => DateTime
  uid => String
  recipient_xpub => String
  username => String
  nickname => String
  status => String
  derivation_scheme => String
  contact_info* => Array<String>
}

map UserKeys {
  uid => String
  recipient_keys => Array<Key>
  profile_keys* => Array<Key> 
  post_keys* => Array<Key>
}

map Post {
  genesis => DateTime
  id => String
  expiry => DateTime
  uid => String
  derivation_scheme => String
  post_detail* => String
}

map Key {
  genesis => DateTime
  id => String
  key => String
  signature => String
}

map PostDetail {
  message => String
  network => Array<BitcoinNetwork>
  type => OrderType
  minimum => UInt
  maximum => UInt
  fiat_currency => FiatCurrency
  payment_method => Array<PaymentMethod>
  rate_type => RateType
  fixed_rate => Float
  reference_exchange => ReferenceExchange
  reference_percent => Float
}

object BitcoinNetwork{
  Mainnet,
  Lightning,
  Liquid
}

object PaymentMethod{
  Cash
  CashAangadiya
  CashBankDeposit
  CashPost
  UPI
  IMPS
  NEFT
  RTGS
  Cheque
}

object OrderType {
  Buy
  Sell
}

object RateType {
  Fixed
  Variable
}

object FiatCurrency {
  INR
  CAD
  GBP
  AUD
  EUR
  USD
  VES
}

object ReferenceExchange {
  LocalBitcoins
  BullBitcoin
  Strike
}

@enduml


' m/purpose'/service'/usecase'/index'/revoke'

' PARENT
' m/128'/0'


' RECIPIENT
' m/128'/0'/0'/0'/0'


' PROFILE
' m/128'/0'/1'/0'/0'


' POSTS
' m/128'/0'/2'/0'/1'
' m/128'/0'/2'/1'/0'
' m/128'/0'/2'/2'/0'